var As=Object.defineProperty;var Qn=e=>{throw TypeError(e)};var js=(e,t,r)=>t in e?As(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ae=(e,t,r)=>js(e,typeof t!="symbol"?t+"":t,r),an=(e,t,r)=>t.has(e)||Qn("Cannot "+r);var l=(e,t,r)=>(an(e,t,"read from private field"),r?r.call(e):t.get(e)),C=(e,t,r)=>t.has(e)?Qn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),R=(e,t,r,n)=>(an(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),$=(e,t,r)=>(an(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();const dn=!1;var On=Array.isArray,Ds=Array.prototype.indexOf,or=Array.prototype.includes,Yr=Array.from,Ps=Object.defineProperty,Xt=Object.getOwnPropertyDescriptor,mi=Object.getOwnPropertyDescriptors,Ns=Object.prototype,Ms=Array.prototype,xn=Object.getPrototypeOf,Zn=Object.isExtensible;const Os=()=>{};function xs(e){return e()}function vn(e){for(var t=0;t<e.length;t++)e[t]()}function yi(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}const te=2,Tr=4,Cr=8,bi=1<<24,ft=16,Ve=32,Gt=64,hn=128,Oe=512,Y=1024,re=2048,Ie=4096,Re=8192,at=16384,Ut=32768,ar=65536,ei=1<<17,Ei=1<<18,ur=1<<19,Ri=1<<20,ot=1<<25,Ht=65536,pn=1<<21,In=1<<22,Rt=1<<23,qt=Symbol("$state"),Is=Symbol("legacy props"),ks=Symbol(""),Dt=new class extends Error{constructor(){super(...arguments);ae(this,"name","StaleReactionError");ae(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var _i;const Ls=!!((_i=globalThis.document)!=null&&_i.contentType)&&globalThis.document.contentType.includes("xml");function Si(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fs(e,t,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Bs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Us(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Vs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gs(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ws(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ys(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ks(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Js=1,$s=2,Ti=4,Xs=8,Qs=16,Zs=2,eo=4,to=8,ro=1,no=2,Z=Symbol(),Ci="http://www.w3.org/1999/xhtml";function io(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ai(e){return e===this.v}function so(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ji(e){return!so(e,this.v)}let cr=!1,oo=!1;function ao(){cr=!0}let L=null;function lr(e){L=e}function kn(e,t=!1,r){L={p:L,i:!1,c:null,e:null,s:e,x:null,l:cr&&!t?{s:null,u:null,$:[]}:null}}function Ln(e){var t=L,r=t.e;if(r!==null){t.e=null;for(var n of r)Ki(n)}return t.i=!0,L=t.p,{}}function Ar(){return!cr||L!==null&&L.l===null}let Pt=[];function Di(){var e=Pt;Pt=[],vn(e)}function lt(e){if(Pt.length===0&&!wr){var t=Pt;queueMicrotask(()=>{t===Pt&&Di()})}Pt.push(e)}function lo(){for(;Pt.length>0;)Di()}function Pi(e){var t=P;if(t===null)return j.f|=Rt,e;if((t.f&Ut)===0&&(t.f&Tr)===0)throw e;Et(e,t)}function Et(e,t){for(;t!==null;){if((t.f&hn)!==0){if((t.f&Ut)===0)throw e;try{t.b.error(e);return}catch(r){e=r}}t=t.parent}throw e}const fo=-7169;function H(e,t){e.f=e.f&fo|t}function qn(e){(e.f&Oe)!==0||e.deps===null?H(e,Y):H(e,Ie)}function Ni(e){if(e!==null)for(const t of e)(t.f&te)===0||(t.f&Ht)===0||(t.f^=Ht,Ni(t.deps))}function Mi(e,t,r){(e.f&re)!==0?t.add(e):(e.f&Ie)!==0&&r.add(e),Ni(e.deps),H(e,Y)}const kr=new Set;let D=null,ee=null,de=[],Kr=null,_n=!1,wr=!1;var Qt,Zt,Mt,er,br,Er,Ot,nt,tr,Se,wn,gn,mn,Oi;const Kn=class Kn{constructor(){C(this,Se);ae(this,"current",new Map);ae(this,"previous",new Map);C(this,Qt,new Set);C(this,Zt,new Set);C(this,Mt,0);C(this,er,0);C(this,br,null);C(this,Er,new Set);C(this,Ot,new Set);C(this,nt,new Map);ae(this,"is_fork",!1);C(this,tr,!1)}skip_effect(t){l(this,nt).has(t)||l(this,nt).set(t,{d:[],m:[]})}unskip_effect(t){var r=l(this,nt).get(t);if(r){l(this,nt).delete(t);for(var n of r.d)H(n,re),Ue(n);for(n of r.m)H(n,Ie),Ue(n)}}process(t){var i;de=[],this.apply();var r=[],n=[];for(const s of t)$(this,Se,gn).call(this,s,r,n);if($(this,Se,wn).call(this)){$(this,Se,mn).call(this,n),$(this,Se,mn).call(this,r);for(const[s,o]of l(this,nt))Li(s,o)}else{for(const s of l(this,Qt))s();l(this,Qt).clear(),l(this,Mt)===0&&$(this,Se,Oi).call(this),D=null,ti(n),ti(r),(i=l(this,br))==null||i.resolve()}ee=null}capture(t,r){r!==Z&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Rt)===0&&(this.current.set(t,t.v),ee==null||ee.set(t,t.v))}activate(){D=this,this.apply()}deactivate(){D===this&&(D=null,ee=null)}flush(){if(this.activate(),de.length>0){if(xi(),D!==null&&D!==this)return}else l(this,Mt)===0&&this.process([]);this.deactivate()}discard(){for(const t of l(this,Zt))t(this);l(this,Zt).clear()}increment(t){R(this,Mt,l(this,Mt)+1),t&&R(this,er,l(this,er)+1)}decrement(t){R(this,Mt,l(this,Mt)-1),t&&R(this,er,l(this,er)-1),!l(this,tr)&&(R(this,tr,!0),lt(()=>{R(this,tr,!1),$(this,Se,wn).call(this)?de.length>0&&this.flush():this.revive()}))}revive(){for(const t of l(this,Er))l(this,Ot).delete(t),H(t,re),Ue(t);for(const t of l(this,Ot))H(t,Ie),Ue(t);this.flush()}oncommit(t){l(this,Qt).add(t)}ondiscard(t){l(this,Zt).add(t)}settled(){return(l(this,br)??R(this,br,yi())).promise}static ensure(){if(D===null){const t=D=new Kn;kr.add(D),wr||lt(()=>{D===t&&t.flush()})}return D}apply(){}};Qt=new WeakMap,Zt=new WeakMap,Mt=new WeakMap,er=new WeakMap,br=new WeakMap,Er=new WeakMap,Ot=new WeakMap,nt=new WeakMap,tr=new WeakMap,Se=new WeakSet,wn=function(){return this.is_fork||l(this,er)>0},gn=function(t,r,n){t.f^=Y;for(var i=t.first;i!==null;){var s=i.f,o=(s&(Ve|Gt))!==0,f=o&&(s&Y)!==0,a=f||(s&Re)!==0||l(this,nt).has(i);if(!a&&i.fn!==null){o?i.f^=Y:(s&Tr)!==0?r.push(i):dr(i)&&((s&ft)!==0&&l(this,Ot).add(i),Vt(i));var u=i.first;if(u!==null){i=u;continue}}for(;i!==null;){var h=i.next;if(h!==null){i=h;break}i=i.parent}}},mn=function(t){for(var r=0;r<t.length;r+=1)Mi(t[r],l(this,Er),l(this,Ot))},Oi=function(){var i;if(kr.size>1){this.previous.clear();var t=ee,r=!0;for(const s of kr){if(s===this){r=!1;continue}const o=[];for(const[a,u]of this.current){if(s.current.has(a))if(r&&u!==s.current.get(a))s.current.set(a,u);else continue;o.push(a)}if(o.length===0)continue;const f=[...s.current.keys()].filter(a=>!this.current.has(a));if(f.length>0){var n=de;de=[];const a=new Set,u=new Map;for(const h of o)Ii(h,f,a,u);if(de.length>0){D=s,s.apply();for(const h of de)$(i=s,Se,gn).call(i,h,[],[]);s.deactivate()}de=n}}D=null,ee=t}kr.delete(this)};let St=Kn;function uo(e){var t=wr;wr=!0;try{for(var r;;){if(lo(),de.length===0&&(D==null||D.flush(),de.length===0))return Kr=null,r;xi()}}finally{wr=t}}function xi(){_n=!0;var e=null;try{for(var t=0;de.length>0;){var r=St.ensure();if(t++>1e3){var n,i;co()}r.process(de),Tt.clear()}}finally{de=[],_n=!1,Kr=null}}function co(){try{Vs()}catch(e){Et(e,Kr)}}let Le=null;function ti(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(at|Re))===0&&dr(n)&&(Le=new Set,Vt(n),n.deps===null&&n.first===null&&n.nodes===null&&n.teardown===null&&n.ac===null&&Xi(n),(Le==null?void 0:Le.size)>0)){Tt.clear();for(const i of Le){if((i.f&(at|Re))!==0)continue;const s=[i];let o=i.parent;for(;o!==null;)Le.has(o)&&(Le.delete(o),s.push(o)),o=o.parent;for(let f=s.length-1;f>=0;f--){const a=s[f];(a.f&(at|Re))===0&&Vt(a)}}Le.clear()}}Le=null}}function Ii(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const i of e.reactions){const s=i.f;(s&te)!==0?Ii(i,t,r,n):(s&(In|ft))!==0&&(s&re)===0&&ki(i,t,n)&&(H(i,re),Ue(i))}}function ki(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(or.call(t,i))return!0;if((i.f&te)!==0&&ki(i,t,r))return r.set(i,!0),!0}return r.set(e,!1),!1}function Ue(e){var t=Kr=e,r=t.b;if(r!=null&&r.is_pending&&(e.f&(Tr|Cr|bi))!==0&&(e.f&Ut)===0){r.defer_effect(e);return}for(;t.parent!==null;){t=t.parent;var n=t.f;if(_n&&t===P&&(n&ft)!==0&&(n&Ei)===0&&(n&Ut)!==0)return;if((n&(Gt|Ve))!==0){if((n&Y)===0)return;t.f^=Y}}de.push(t)}function Li(e,t){if(!((e.f&Ve)!==0&&(e.f&Y)!==0)){(e.f&re)!==0?t.d.push(e):(e.f&Ie)!==0&&t.m.push(e),H(e,Y);for(var r=e.first;r!==null;)Li(r,t),r=r.next}}function vo(e){let t=0,r=At(0),n;return()=>{Un()&&(c(r),Xr(()=>(t===0&&(n=V(()=>e(()=>gr(r)))),t+=1,()=>{lt(()=>{t-=1,t===0&&(n==null||n(),n=void 0,gr(r))})})))}}var ho=ar|ur;function po(e,t,r,n){new _o(e,t,r,n)}var Pe,Mn,Ye,xt,ce,Ke,ye,qe,it,It,mt,rr,nr,ir,st,Wr,K,wo,go,mo,yn,Ur,Hr,bn;class _o{constructor(t,r,n,i){C(this,K);ae(this,"parent");ae(this,"is_pending",!1);ae(this,"transform_error");C(this,Pe);C(this,Mn,null);C(this,Ye);C(this,xt);C(this,ce);C(this,Ke,null);C(this,ye,null);C(this,qe,null);C(this,it,null);C(this,It,0);C(this,mt,0);C(this,rr,!1);C(this,nr,new Set);C(this,ir,new Set);C(this,st,null);C(this,Wr,vo(()=>(R(this,st,At(l(this,It))),()=>{R(this,st,null)})));var s;R(this,Pe,t),R(this,Ye,r),R(this,xt,o=>{var f=P;f.b=this,f.f|=hn,n(o)}),this.parent=P.b,this.transform_error=i??((s=this.parent)==null?void 0:s.transform_error)??(o=>o),R(this,ce,Hn(()=>{$(this,K,yn).call(this)},ho))}defer_effect(t){Mi(t,l(this,nr),l(this,ir))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!l(this,Ye).pending}update_pending_count(t){$(this,K,bn).call(this,t),R(this,It,l(this,It)+t),!(!l(this,st)||l(this,rr))&&(R(this,rr,!0),lt(()=>{R(this,rr,!1),l(this,st)&&fr(l(this,st),l(this,It))}))}get_effect_pending(){return l(this,Wr).call(this),c(l(this,st))}error(t){var r=l(this,Ye).onerror;let n=l(this,Ye).failed;if(!r&&!n)throw t;l(this,Ke)&&(pe(l(this,Ke)),R(this,Ke,null)),l(this,ye)&&(pe(l(this,ye)),R(this,ye,null)),l(this,qe)&&(pe(l(this,qe)),R(this,qe,null));var i=!1,s=!1;const o=()=>{if(i){io();return}i=!0,s&&Ks(),l(this,qe)!==null&&Ft(l(this,qe),()=>{R(this,qe,null)}),$(this,K,Hr).call(this,()=>{St.ensure(),$(this,K,yn).call(this)})},f=a=>{try{s=!0,r==null||r(a,o),s=!1}catch(u){Et(u,l(this,ce)&&l(this,ce).parent)}n&&R(this,qe,$(this,K,Hr).call(this,()=>{St.ensure();try{return Ne(()=>{var u=P;u.b=this,u.f|=hn,n(l(this,Pe),()=>a,()=>o)})}catch(u){return Et(u,l(this,ce).parent),null}}))};lt(()=>{var a;try{a=this.transform_error(t)}catch(u){Et(u,l(this,ce)&&l(this,ce).parent);return}a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(f,u=>Et(u,l(this,ce)&&l(this,ce).parent)):f(a)})}}Pe=new WeakMap,Mn=new WeakMap,Ye=new WeakMap,xt=new WeakMap,ce=new WeakMap,Ke=new WeakMap,ye=new WeakMap,qe=new WeakMap,it=new WeakMap,It=new WeakMap,mt=new WeakMap,rr=new WeakMap,nr=new WeakMap,ir=new WeakMap,st=new WeakMap,Wr=new WeakMap,K=new WeakSet,wo=function(){try{R(this,Ke,Ne(()=>l(this,xt).call(this,l(this,Pe))))}catch(t){this.error(t)}},go=function(t){const r=l(this,Ye).failed;r&&R(this,qe,Ne(()=>{r(l(this,Pe),()=>t,()=>()=>{})}))},mo=function(){const t=l(this,Ye).pending;t&&(this.is_pending=!0,R(this,ye,Ne(()=>t(l(this,Pe)))),lt(()=>{var r=R(this,it,document.createDocumentFragment()),n=Ct();r.append(n),R(this,Ke,$(this,K,Hr).call(this,()=>(St.ensure(),Ne(()=>l(this,xt).call(this,n))))),l(this,mt)===0&&(l(this,Pe).before(r),R(this,it,null),Ft(l(this,ye),()=>{R(this,ye,null)}),$(this,K,Ur).call(this))}))},yn=function(){try{if(this.is_pending=this.has_pending_snippet(),R(this,mt,0),R(this,It,0),R(this,Ke,Ne(()=>{l(this,xt).call(this,l(this,Pe))})),l(this,mt)>0){var t=R(this,it,document.createDocumentFragment());es(l(this,Ke),t);const r=l(this,Ye).pending;R(this,ye,Ne(()=>r(l(this,Pe))))}else $(this,K,Ur).call(this)}catch(r){this.error(r)}},Ur=function(){this.is_pending=!1;for(const t of l(this,nr))H(t,re),Ue(t);for(const t of l(this,ir))H(t,Ie),Ue(t);l(this,nr).clear(),l(this,ir).clear()},Hr=function(t){var r=P,n=j,i=L;Qe(l(this,ce)),ke(l(this,ce)),lr(l(this,ce).ctx);try{return t()}catch(s){return Pi(s),null}finally{Qe(r),ke(n),lr(i)}},bn=function(t){var r;if(!this.has_pending_snippet()){this.parent&&$(r=this.parent,K,bn).call(r,t);return}R(this,mt,l(this,mt)+t),l(this,mt)===0&&($(this,K,Ur).call(this),l(this,ye)&&Ft(l(this,ye),()=>{R(this,ye,null)}),l(this,it)&&(l(this,Pe).before(l(this,it)),R(this,it,null)))};function yo(e,t,r,n){const i=Ar()?Jr:$r;var s=e.filter(p=>!p.settled);if(r.length===0&&s.length===0){n(t.map(i));return}var o=P,f=bo(),a=s.length===1?s[0].promise:s.length>1?Promise.all(s.map(p=>p.promise)):null;function u(p){f();try{n(p)}catch(_){(o.f&at)===0&&Et(_,o)}En()}if(r.length===0){a.then(()=>u(t.map(i)));return}function h(){f(),Promise.all(r.map(p=>Ro(p))).then(p=>u([...t.map(i),...p])).catch(p=>Et(p,o))}a?a.then(h):h()}function bo(){var e=P,t=j,r=L,n=D;return function(s=!0){Qe(e),ke(t),lr(r),s&&(n==null||n.activate())}}function En(e=!0){Qe(null),ke(null),lr(null),e&&(D==null||D.deactivate())}function Eo(){var e=P.b,t=D,r=e.is_rendered();return e.update_pending_count(1),t.increment(r),()=>{e.update_pending_count(-1),t.decrement(r)}}function Jr(e){var t=te|re,r=j!==null&&(j.f&te)!==0?j:null;return P!==null&&(P.f|=ur),{ctx:L,deps:null,effects:null,equals:Ai,f:t,fn:e,reactions:null,rv:0,v:Z,wv:0,parent:r??P,ac:null}}function Ro(e,t,r){P===null&&qs();var i=void 0,s=At(Z),o=!j,f=new Map;return ko(()=>{var _;var a=yi();i=a.promise;try{Promise.resolve(e()).then(a.resolve,a.reject).finally(En)}catch(w){a.reject(w),En()}var u=D;if(o){var h=Eo();(_=f.get(u))==null||_.reject(Dt),f.delete(u),f.set(u,a)}const p=(w,m=void 0)=>{if(u.activate(),m)m!==Dt&&(s.f|=Rt,fr(s,m));else{(s.f&Rt)!==0&&(s.f^=Rt),fr(s,w);for(const[b,v]of f){if(f.delete(b),b===u)break;v.reject(Dt)}}h&&h()};a.promise.then(p,w=>p(null,w||"unknown"))}),Yi(()=>{for(const a of f.values())a.reject(Dt)}),new Promise(a=>{function u(h){function p(){h===i?a(s):u(i)}h.then(p,p)}u(i)})}function So(e){const t=Jr(e);return ts(t),t}function $r(e){const t=Jr(e);return t.equals=ji,t}function To(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)pe(t[r])}}function Co(e){for(var t=e.parent;t!==null;){if((t.f&te)===0)return(t.f&at)===0?t:null;t=t.parent}return null}function Fn(e){var t,r=P;Qe(Co(e));try{e.f&=~Ht,To(e),t=ss(e)}finally{Qe(r)}return t}function qi(e){var t=Fn(e);if(!e.equals(t)&&(e.wv=ns(),(!(D!=null&&D.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){H(e,Y);return}jt||(ee!==null?(Un()||D!=null&&D.is_fork)&&ee.set(e,t):qn(e))}function Ao(e){var t,r;if(e.effects!==null)for(const n of e.effects)(n.teardown||n.ac)&&((t=n.teardown)==null||t.call(n),(r=n.ac)==null||r.abort(Dt),n.teardown=Os,n.ac=null,yr(n,0),Vn(n))}function Fi(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&Vt(t)}let Rn=new Set;const Tt=new Map;let Bi=!1;function At(e,t){var r={f:0,v:e,reactions:null,equals:Ai,rv:0,wv:0};return r}function _t(e,t){const r=At(e);return ts(r),r}function W(e,t=!1,r=!0){var i;const n=At(e);return t||(n.equals=ji),cr&&r&&L!==null&&L.l!==null&&((i=L.l).s??(i.s=[])).push(n),n}function E(e,t,r=!1){j!==null&&(!He||(j.f&ei)!==0)&&Ar()&&(j.f&(te|ft|In|ei))!==0&&(xe===null||!or.call(xe,e))&&Ys();let n=r?$t(t):t;return fr(e,n)}function fr(e,t){if(!e.equals(t)){var r=e.v;jt?Tt.set(e,t):Tt.set(e,r),e.v=t;var n=St.ensure();if(n.capture(e,r),(e.f&te)!==0){const i=e;(e.f&re)!==0&&Fn(i),qn(i)}e.wv=ns(),Ui(e,re),Ar()&&P!==null&&(P.f&Y)!==0&&(P.f&(Ve|Gt))===0&&(je===null?Fo([e]):je.push(e)),!n.is_fork&&Rn.size>0&&!Bi&&jo()}return t}function jo(){Bi=!1;for(const e of Rn)(e.f&Y)!==0&&H(e,Ie),dr(e)&&Vt(e);Rn.clear()}function gr(e){E(e,e.v+1)}function Ui(e,t){var r=e.reactions;if(r!==null)for(var n=Ar(),i=r.length,s=0;s<i;s++){var o=r[s],f=o.f;if(!(!n&&o===P)){var a=(f&re)===0;if(a&&H(o,t),(f&te)!==0){var u=o;ee==null||ee.delete(u),(f&Ht)===0&&(f&Oe&&(o.f|=Ht),Ui(u,Ie))}else a&&((f&ft)!==0&&Le!==null&&Le.add(o),Ue(o))}}}function $t(e){if(typeof e!="object"||e===null||qt in e)return e;const t=xn(e);if(t!==Ns&&t!==Ms)return e;var r=new Map,n=On(e),i=_t(0),s=Bt,o=f=>{if(Bt===s)return f();var a=j,u=Bt;ke(null),ii(s);var h=f();return ke(a),ii(u),h};return n&&r.set("length",_t(e.length)),new Proxy(e,{defineProperty(f,a,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ws();var h=r.get(a);return h===void 0?o(()=>{var p=_t(u.value);return r.set(a,p),p}):E(h,u.value,!0),!0},deleteProperty(f,a){var u=r.get(a);if(u===void 0){if(a in f){const h=o(()=>_t(Z));r.set(a,h),gr(i)}}else E(u,Z),gr(i);return!0},get(f,a,u){var w;if(a===qt)return e;var h=r.get(a),p=a in f;if(h===void 0&&(!p||(w=Xt(f,a))!=null&&w.writable)&&(h=o(()=>{var m=$t(p?f[a]:Z),b=_t(m);return b}),r.set(a,h)),h!==void 0){var _=c(h);return _===Z?void 0:_}return Reflect.get(f,a,u)},getOwnPropertyDescriptor(f,a){var u=Reflect.getOwnPropertyDescriptor(f,a);if(u&&"value"in u){var h=r.get(a);h&&(u.value=c(h))}else if(u===void 0){var p=r.get(a),_=p==null?void 0:p.v;if(p!==void 0&&_!==Z)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return u},has(f,a){var _;if(a===qt)return!0;var u=r.get(a),h=u!==void 0&&u.v!==Z||Reflect.has(f,a);if(u!==void 0||P!==null&&(!h||(_=Xt(f,a))!=null&&_.writable)){u===void 0&&(u=o(()=>{var w=h?$t(f[a]):Z,m=_t(w);return m}),r.set(a,u));var p=c(u);if(p===Z)return!1}return h},set(f,a,u,h){var S;var p=r.get(a),_=a in f;if(n&&a==="length")for(var w=u;w<p.v;w+=1){var m=r.get(w+"");m!==void 0?E(m,Z):w in f&&(m=o(()=>_t(Z)),r.set(w+"",m))}if(p===void 0)(!_||(S=Xt(f,a))!=null&&S.writable)&&(p=o(()=>_t(void 0)),E(p,$t(u)),r.set(a,p));else{_=p.v!==Z;var b=o(()=>$t(u));E(p,b)}var v=Reflect.getOwnPropertyDescriptor(f,a);if(v!=null&&v.set&&v.set.call(h,u),!_){if(n&&typeof a=="string"){var y=r.get("length"),N=Number(a);Number.isInteger(N)&&N>=y.v&&E(y,N+1)}gr(i)}return!0},ownKeys(f){c(i);var a=Reflect.ownKeys(f).filter(p=>{var _=r.get(p);return _===void 0||_.v!==Z});for(var[u,h]of r)h.v!==Z&&!(u in f)&&a.push(u);return a},setPrototypeOf(){zs()}})}var ri,Hi,Vi,Gi;function Do(){if(ri===void 0){ri=window,Hi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;Vi=Xt(t,"firstChild").get,Gi=Xt(t,"nextSibling").get,Zn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Zn(r)&&(r.__t=void 0)}}function Ct(e=""){return document.createTextNode(e)}function Gr(e){return Vi.call(e)}function jr(e){return Gi.call(e)}function A(e,t){return Gr(e)}function Sn(e,t=!1){{var r=Gr(e);return r instanceof Comment&&r.data===""?jr(r):r}}function k(e,t=1,r=!1){let n=e;for(;t--;)n=jr(n);return n}function Po(e){e.textContent=""}function Wi(){return!1}function No(e,t,r){return document.createElementNS(Ci,e,void 0)}function Bn(e){var t=j,r=P;ke(null),Qe(null);try{return e()}finally{ke(t),Qe(r)}}function zi(e){P===null&&(j===null&&Hs(),Us()),jt&&Bs()}function Mo(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ze(e,t,r){var n=P;n!==null&&(n.f&Re)!==0&&(e|=Re);var i={ctx:L,deps:null,nodes:null,f:e|re|Oe,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Vt(i)}catch(f){throw pe(i),f}else t!==null&&Ue(i);var s=i;if(r&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&ur)===0&&(s=s.first,(e&ft)!==0&&(e&ar)!==0&&s!==null&&(s.f|=ar)),s!==null&&(s.parent=n,n!==null&&Mo(s,n),j!==null&&(j.f&te)!==0&&(e&Gt)===0)){var o=j;(o.effects??(o.effects=[])).push(s)}return i}function Un(){return j!==null&&!He}function Yi(e){const t=Ze(Cr,null,!1);return H(t,Y),t.teardown=e,t}function Tn(e){zi();var t=P.f,r=!j&&(t&Ve)!==0&&(t&Ut)===0;if(r){var n=L;(n.e??(n.e=[])).push(e)}else return Ki(e)}function Ki(e){return Ze(Tr|Ri,e,!1)}function Oo(e){return zi(),Ze(Cr|Ri,e,!0)}function xo(e){St.ensure();const t=Ze(Gt|ur,e,!0);return(r={})=>new Promise(n=>{r.outro?Ft(t,()=>{pe(t),n(void 0)}):(pe(t),n(void 0))})}function Io(e){return Ze(Tr,e,!1)}function Cn(e,t){var r=L,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=Xr(()=>{e(),!n.ran&&(n.ran=!0,V(t))})}function Ji(){var e=L;Xr(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&Y)!==0&&r.deps!==null&&H(r,Ie),dr(r)&&Vt(r),t.ran=!1}})}function ko(e){return Ze(In|ur,e,!0)}function Xr(e,t=0){return Ze(Cr|t,e,!0)}function ve(e,t=[],r=[],n=[]){yo(n,t,r,i=>{Ze(Cr,()=>e(...i.map(c)),!0)})}function Hn(e,t=0){var r=Ze(ft|t,e,!0);return r}function Ne(e){return Ze(Ve|ur,e,!0)}function $i(e){var t=e.teardown;if(t!==null){const r=jt,n=j;ni(!0),ke(null);try{t.call(null)}finally{ni(r),ke(n)}}}function Vn(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&Bn(()=>{i.abort(Dt)});var n=r.next;(r.f&Gt)!==0?r.parent=null:pe(r,t),r=n}}function Lo(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ve)===0&&pe(t),t=r}}function pe(e,t=!0){var r=!1;(t||(e.f&Ei)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(qo(e.nodes.start,e.nodes.end),r=!0),Vn(e,t&&!r),yr(e,0),H(e,at);var n=e.nodes&&e.nodes.t;if(n!==null)for(const s of n)s.stop();$i(e);var i=e.parent;i!==null&&i.first!==null&&Xi(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function qo(e,t){for(;e!==null;){var r=e===t?null:jr(e);e.remove(),e=r}}function Xi(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Ft(e,t,r=!0){var n=[];Qi(e,n,!0);var i=()=>{r&&pe(e),t&&t()},s=n.length;if(s>0){var o=()=>--s||i();for(var f of n)f.out(o)}else i()}function Qi(e,t,r){if((e.f&Re)===0){e.f^=Re;var n=e.nodes&&e.nodes.t;if(n!==null)for(const f of n)(f.is_global||r)&&t.push(f);for(var i=e.first;i!==null;){var s=i.next,o=(i.f&ar)!==0||(i.f&Ve)!==0&&(e.f&ft)!==0;Qi(i,t,o?r:!1),i=s}}}function Gn(e){Zi(e,!0)}function Zi(e,t){if((e.f&Re)!==0){e.f^=Re,(e.f&Y)===0&&(H(e,re),Ue(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&ar)!==0||(r.f&Ve)!==0;Zi(r,i?t:!1),r=n}var s=e.nodes&&e.nodes.t;if(s!==null)for(const o of s)(o.is_global||t)&&o.in()}}function es(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var i=r===n?null:jr(r);t.append(r),r=i}}let Vr=!1,jt=!1;function ni(e){jt=e}let j=null,He=!1;function ke(e){j=e}let P=null;function Qe(e){P=e}let xe=null;function ts(e){j!==null&&(xe===null?xe=[e]:xe.push(e))}let he=null,me=0,je=null;function Fo(e){je=e}let rs=1,Nt=0,Bt=Nt;function ii(e){Bt=e}function ns(){return++rs}function dr(e){var t=e.f;if((t&re)!==0)return!0;if(t&te&&(e.f&=~Ht),(t&Ie)!==0){for(var r=e.deps,n=r.length,i=0;i<n;i++){var s=r[i];if(dr(s)&&qi(s),s.wv>e.wv)return!0}(t&Oe)!==0&&ee===null&&H(e,Y)}return!1}function is(e,t,r=!0){var n=e.reactions;if(n!==null&&!(xe!==null&&or.call(xe,e)))for(var i=0;i<n.length;i++){var s=n[i];(s.f&te)!==0?is(s,t,!1):t===s&&(r?H(s,re):(s.f&Y)!==0&&H(s,Ie),Ue(s))}}function ss(e){var b;var t=he,r=me,n=je,i=j,s=xe,o=L,f=He,a=Bt,u=e.f;he=null,me=0,je=null,j=(u&(Ve|Gt))===0?e:null,xe=null,lr(e.ctx),He=!1,Bt=++Nt,e.ac!==null&&(Bn(()=>{e.ac.abort(Dt)}),e.ac=null);try{e.f|=pn;var h=e.fn,p=h();e.f|=Ut;var _=e.deps,w=D==null?void 0:D.is_fork;if(he!==null){var m;if(w||yr(e,me),_!==null&&me>0)for(_.length=me+he.length,m=0;m<he.length;m++)_[me+m]=he[m];else e.deps=_=he;if(Un()&&(e.f&Oe)!==0)for(m=me;m<_.length;m++)((b=_[m]).reactions??(b.reactions=[])).push(e)}else!w&&_!==null&&me<_.length&&(yr(e,me),_.length=me);if(Ar()&&je!==null&&!He&&_!==null&&(e.f&(te|Ie|re))===0)for(m=0;m<je.length;m++)is(je[m],e);if(i!==null&&i!==e){if(Nt++,i.deps!==null)for(let v=0;v<r;v+=1)i.deps[v].rv=Nt;if(t!==null)for(const v of t)v.rv=Nt;je!==null&&(n===null?n=je:n.push(...je))}return(e.f&Rt)!==0&&(e.f^=Rt),p}catch(v){return Pi(v)}finally{e.f^=pn,he=t,me=r,je=n,j=i,xe=s,lr(o),He=f,Bt=a}}function Bo(e,t){let r=t.reactions;if(r!==null){var n=Ds.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}if(r===null&&(t.f&te)!==0&&(he===null||!or.call(he,t))){var s=t;(s.f&Oe)!==0&&(s.f^=Oe,s.f&=~Ht),qn(s),Ao(s),yr(s,0)}}function yr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Bo(e,r[n])}function Vt(e){var t=e.f;if((t&at)===0){H(e,Y);var r=P,n=Vr;P=e,Vr=!0;try{(t&(ft|bi))!==0?Lo(e):Vn(e),$i(e);var i=ss(e);e.teardown=typeof i=="function"?i:null,e.wv=rs;var s;dn&&oo&&(e.f&re)!==0&&e.deps}finally{Vr=n,P=r}}}async function Uo(){await Promise.resolve(),uo()}function c(e){var t=e.f,r=(t&te)!==0;if(j!==null&&!He){var n=P!==null&&(P.f&at)!==0;if(!n&&(xe===null||!or.call(xe,e))){var i=j.deps;if((j.f&pn)!==0)e.rv<Nt&&(e.rv=Nt,he===null&&i!==null&&i[me]===e?me++:he===null?he=[e]:he.push(e));else{(j.deps??(j.deps=[])).push(e);var s=e.reactions;s===null?e.reactions=[j]:or.call(s,j)||s.push(j)}}}if(jt&&Tt.has(e))return Tt.get(e);if(r){var o=e;if(jt){var f=o.v;return((o.f&Y)===0&&o.reactions!==null||as(o))&&(f=Fn(o)),Tt.set(o,f),f}var a=(o.f&Oe)===0&&!He&&j!==null&&(Vr||(j.f&Oe)!==0),u=(o.f&Ut)===0;dr(o)&&(a&&(o.f|=Oe),qi(o)),a&&!u&&(Fi(o),os(o))}if(ee!=null&&ee.has(e))return ee.get(e);if((e.f&Rt)!==0)throw e.v;return e.v}function os(e){if(e.f|=Oe,e.deps!==null)for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&te)!==0&&(t.f&Oe)===0&&(Fi(t),os(t))}function as(e){if(e.v===Z)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Tt.has(t)||(t.f&te)!==0&&as(t))return!0;return!1}function V(e){var t=He;try{return He=!0,e()}finally{He=t}}function gt(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(qt in e)An(e);else if(!Array.isArray(e))for(let t in e){const r=e[t];typeof r=="object"&&r&&qt in r&&An(r)}}}function An(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{An(e[n],t)}catch{}const r=xn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=mi(r);for(let i in n){const s=n[i].get;if(s)try{s.call(e)}catch{}}}}}const Ho=["touchstart","touchmove"];function Vo(e){return Ho.includes(e)}const Lr=Symbol("events"),Go=new Set,si=new Set;function Wo(e,t,r,n={}){function i(s){if(n.capture||jn.call(t,s),!s.cancelBubble)return Bn(()=>r==null?void 0:r.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?lt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function De(e,t,r,n,i){var s={capture:n,passive:i},o=Wo(e,t,r,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Yi(()=>{t.removeEventListener(e,o,s)})}let oi=null;function jn(e){var v,y;var t=this,r=t.ownerDocument,n=e.type,i=((v=e.composedPath)==null?void 0:v.call(e))||[],s=i[0]||e.target;oi=e;var o=0,f=oi===e&&e[Lr];if(f){var a=i.indexOf(f);if(a!==-1&&(t===document||t===window)){e[Lr]=t;return}var u=i.indexOf(t);if(u===-1)return;a<=u&&(o=a)}if(s=i[o]||e.target,s!==t){Ps(e,"currentTarget",{configurable:!0,get(){return s||r}});var h=j,p=P;ke(null),Qe(null);try{for(var _,w=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var b=(y=s[Lr])==null?void 0:y[n];b!=null&&(!s.disabled||e.target===s)&&b.call(s,e)}catch(N){_?w.push(N):_=N}if(e.cancelBubble||m===t||m===null)break;s=m}if(_){for(let N of w)queueMicrotask(()=>{throw N});throw _}}finally{e[Lr]=t,delete e.currentTarget,ke(h),Qe(p)}}}var wi;const ln=((wi=globalThis==null?void 0:globalThis.window)==null?void 0:wi.trustedTypes)&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:e=>e});function zo(e){return(ln==null?void 0:ln.createHTML(e))??e}function Yo(e){var t=No("template");return t.innerHTML=zo(e.replaceAll("<!>","<!---->")),t.content}function Dn(e,t){var r=P;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function G(e,t){var r=(t&ro)!==0,n=(t&no)!==0,i,s=!e.startsWith("<!>");return()=>{i===void 0&&(i=Yo(s?e:"<!>"+e),r||(i=Gr(i)));var o=n||Hi?document.importNode(i,!0):i.cloneNode(!0);if(r){var f=Gr(o),a=o.lastChild;Dn(f,a)}else Dn(o,o);return o}}function ai(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Ct();return e.append(t,r),Dn(t,r),e}function q(e,t){e!==null&&e.before(t)}function Ee(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Ko(e,t){return Jo(e,t)}const qr=new Map;function Jo(e,{target:t,anchor:r,props:n={},events:i,context:s,intro:o=!0,transformError:f}){Do();var a=void 0,u=xo(()=>{var h=r??t.appendChild(Ct());po(h,{pending:()=>{}},w=>{kn({});var m=L;s&&(m.c=s),i&&(n.$$events=i),a=e(w,n)||{},Ln()},f);var p=new Set,_=w=>{for(var m=0;m<w.length;m++){var b=w[m];if(!p.has(b)){p.add(b);var v=Vo(b);for(const S of[t,document]){var y=qr.get(S);y===void 0&&(y=new Map,qr.set(S,y));var N=y.get(b);N===void 0?(S.addEventListener(b,jn,{passive:v}),y.set(b,1)):y.set(b,N+1)}}}};return _(Yr(Go)),si.add(_),()=>{var v;for(var w of p)for(const y of[t,document]){var m=qr.get(y),b=m.get(w);--b==0?(y.removeEventListener(w,jn),m.delete(w),m.size===0&&qr.delete(y)):m.set(w,b)}si.delete(_),h!==r&&((v=h.parentNode)==null||v.removeChild(h))}});return $o.set(a,u),a}let $o=new WeakMap;var Fe,Je,be,kt,Rr,Sr,zr;class Xo{constructor(t,r=!0){ae(this,"anchor");C(this,Fe,new Map);C(this,Je,new Map);C(this,be,new Map);C(this,kt,new Set);C(this,Rr,!0);C(this,Sr,()=>{var t=D;if(l(this,Fe).has(t)){var r=l(this,Fe).get(t),n=l(this,Je).get(r);if(n)Gn(n),l(this,kt).delete(r);else{var i=l(this,be).get(r);i&&(l(this,Je).set(r,i.effect),l(this,be).delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[s,o]of l(this,Fe)){if(l(this,Fe).delete(s),s===t)break;const f=l(this,be).get(o);f&&(pe(f.effect),l(this,be).delete(o))}for(const[s,o]of l(this,Je)){if(s===r||l(this,kt).has(s))continue;const f=()=>{if(Array.from(l(this,Fe).values()).includes(s)){var u=document.createDocumentFragment();es(o,u),u.append(Ct()),l(this,be).set(s,{effect:o,fragment:u})}else pe(o);l(this,kt).delete(s),l(this,Je).delete(s)};l(this,Rr)||!n?(l(this,kt).add(s),Ft(o,f,!1)):f()}}});C(this,zr,t=>{l(this,Fe).delete(t);const r=Array.from(l(this,Fe).values());for(const[n,i]of l(this,be))r.includes(n)||(pe(i.effect),l(this,be).delete(n))});this.anchor=t,R(this,Rr,r)}ensure(t,r){var n=D,i=Wi();if(r&&!l(this,Je).has(t)&&!l(this,be).has(t))if(i){var s=document.createDocumentFragment(),o=Ct();s.append(o),l(this,be).set(t,{effect:Ne(()=>r(o)),fragment:s})}else l(this,Je).set(t,Ne(()=>r(this.anchor)));if(l(this,Fe).set(n,t),i){for(const[f,a]of l(this,Je))f===t?n.unskip_effect(a):n.skip_effect(a);for(const[f,a]of l(this,be))f===t?n.unskip_effect(a.effect):n.skip_effect(a.effect);n.oncommit(l(this,Sr)),n.ondiscard(l(this,zr))}else l(this,Sr).call(this)}}Fe=new WeakMap,Je=new WeakMap,be=new WeakMap,kt=new WeakMap,Rr=new WeakMap,Sr=new WeakMap,zr=new WeakMap;function Me(e,t,r=!1){var n=new Xo(e),i=r?ar:0;function s(o,f){n.ensure(o,f)}Hn(()=>{var o=!1;t((f,a=0)=>{o=!0,s(a,f)}),o||s(!1,null)},i)}function Pn(e,t){return t}function Qo(e,t,r){for(var n=[],i=t.length,s,o=t.length,f=0;f<i;f++){let p=t[f];Ft(p,()=>{if(s){if(s.pending.delete(p),s.done.add(p),s.pending.size===0){var _=e.outrogroups;Nn(Yr(s.done)),_.delete(s),_.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var a=n.length===0&&r!==null;if(a){var u=r,h=u.parentNode;Po(h),h.append(u),e.items.clear()}Nn(t,!a)}else s={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function Nn(e,t=!0){for(var r=0;r<e.length;r++)pe(e[r],t)}var li;function mr(e,t,r,n,i,s=null){var o=e,f=new Map,a=(t&Ti)!==0;if(a){var u=e;o=u.appendChild(Ct())}var h=null,p=$r(()=>{var y=r();return On(y)?y:y==null?[]:Yr(y)}),_,w=!0;function m(){v.fallback=h,Zo(v,_,o,t,n),h!==null&&(_.length===0?(h.f&ot)===0?Gn(h):(h.f^=ot,_r(h,null,o)):Ft(h,()=>{h=null}))}var b=Hn(()=>{_=c(p);for(var y=_.length,N=new Set,S=D,x=Wi(),z=0;z<y;z+=1){var fe=_[z],F=n(fe,z),B=w?null:f.get(F);B?(B.v&&fr(B.v,fe),B.i&&fr(B.i,z),x&&S.unskip_effect(B.e)):(B=ea(f,w?o:li??(li=Ct()),fe,F,z,i,t,r),w||(B.e.f|=ot),f.set(F,B)),N.add(F)}if(y===0&&s&&!h&&(w?h=Ne(()=>s(o)):(h=Ne(()=>s(li??(li=Ct()))),h.f|=ot)),y>N.size&&Fs(),!w)if(x){for(const[_e,et]of f)N.has(_e)||S.skip_effect(et.e);S.oncommit(m),S.ondiscard(()=>{})}else m();c(p)}),v={effect:b,items:f,outrogroups:null,fallback:h};w=!1}function pr(e){for(;e!==null&&(e.f&Ve)===0;)e=e.next;return e}function Zo(e,t,r,n,i){var et,Ge,Wt,tt,ut,zt,M,U,we;var s=(n&Xs)!==0,o=t.length,f=e.items,a=pr(e.effect.first),u,h=null,p,_=[],w=[],m,b,v,y;if(s)for(y=0;y<o;y+=1)m=t[y],b=i(m,y),v=f.get(b).e,(v.f&ot)===0&&((Ge=(et=v.nodes)==null?void 0:et.a)==null||Ge.measure(),(p??(p=new Set)).add(v));for(y=0;y<o;y+=1){if(m=t[y],b=i(m,y),v=f.get(b).e,e.outrogroups!==null)for(const se of e.outrogroups)se.pending.delete(v),se.done.delete(v);if((v.f&ot)!==0)if(v.f^=ot,v===a)_r(v,null,r);else{var N=h?h.next:a;v===e.effect.last&&(e.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),wt(e,h,v),wt(e,v,N),_r(v,N,r),h=v,_=[],w=[],a=pr(h.next);continue}if((v.f&Re)!==0&&(Gn(v),s&&((tt=(Wt=v.nodes)==null?void 0:Wt.a)==null||tt.unfix(),(p??(p=new Set)).delete(v))),v!==a){if(u!==void 0&&u.has(v)){if(_.length<w.length){var S=w[0],x;h=S.prev;var z=_[0],fe=_[_.length-1];for(x=0;x<_.length;x+=1)_r(_[x],S,r);for(x=0;x<w.length;x+=1)u.delete(w[x]);wt(e,z.prev,fe.next),wt(e,h,z),wt(e,fe,S),a=S,h=fe,y-=1,_=[],w=[]}else u.delete(v),_r(v,a,r),wt(e,v.prev,v.next),wt(e,v,h===null?e.effect.first:h.next),wt(e,h,v),h=v;continue}for(_=[],w=[];a!==null&&a!==v;)(u??(u=new Set)).add(a),w.push(a),a=pr(a.next);if(a===null)continue}(v.f&ot)===0&&_.push(v),h=v,a=pr(v.next)}if(e.outrogroups!==null){for(const se of e.outrogroups)se.pending.size===0&&(Nn(Yr(se.done)),(ut=e.outrogroups)==null||ut.delete(se));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||u!==void 0){var F=[];if(u!==void 0)for(v of u)(v.f&Re)===0&&F.push(v);for(;a!==null;)(a.f&Re)===0&&a!==e.fallback&&F.push(a),a=pr(a.next);var B=F.length;if(B>0){var _e=(n&Ti)!==0&&o===0?r:null;if(s){for(y=0;y<B;y+=1)(M=(zt=F[y].nodes)==null?void 0:zt.a)==null||M.measure();for(y=0;y<B;y+=1)(we=(U=F[y].nodes)==null?void 0:U.a)==null||we.fix()}Qo(e,F,_e)}}s&&lt(()=>{var se,rt;if(p!==void 0)for(v of p)(rt=(se=v.nodes)==null?void 0:se.a)==null||rt.apply()})}function ea(e,t,r,n,i,s,o,f){var a=(o&Js)!==0?(o&Qs)===0?W(r,!1,!1):At(r):null,u=(o&$s)!==0?At(i):null;return{v:a,i:u,e:Ne(()=>(s(t,a??r,u??i,f),()=>{e.delete(n)}))}}function _r(e,t,r){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,s=t&&(t.f&ot)===0?t.nodes.start:r;n!==null;){var o=jr(n);if(s.before(n),n===i)return;n=o}}function wt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}const fi=[...` 	
\r\fÂ \v\uFEFF`];function ta(e,t,r){var n=e==null?"":""+e;if(r){for(var i of Object.keys(r))if(r[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,o=0;(o=n.indexOf(i,o))>=0;){var f=o+s;(o===0||fi.includes(n[o-1]))&&(f===n.length||fi.includes(n[f]))?n=(o===0?"":n.substring(0,o))+n.substring(f+1):o=f}}return n===""?null:n}function fn(e,t,r,n,i,s){var o=e.__className;if(o!==r||o===void 0){var f=ta(r,n,s);f==null?e.removeAttribute("class"):e.className=f,e.__className=r}else if(s&&i!==s)for(var a in s){var u=!!s[a];(i==null||u!==!!i[a])&&e.classList.toggle(a,u)}return s}const ra=Symbol("is custom element"),na=Symbol("is html"),ia=Ls?"progress":"PROGRESS";function sa(e,t){var r=ls(e);r.value===(r.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!==ia)||(e.value=t??"")}function un(e,t,r,n){var i=ls(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[ks]=r),r==null?e.removeAttribute(t):typeof r!="string"&&oa(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ls(e){return e.__attributes??(e.__attributes={[ra]:e.nodeName.includes("-"),[na]:e.namespaceURI===Ci})}var ui=new Map;function oa(e){var t=e.getAttribute("is")||e.nodeName,r=ui.get(t);if(r)return r;ui.set(t,r=[]);for(var n,i=e,s=Element.prototype;s!==i;){n=mi(i);for(var o in n)n[o].set&&r.push(o);i=xn(i)}return r}function ci(e,t){return e===t||(e==null?void 0:e[qt])===t}function di(e={},t,r,n){return Io(()=>{var i,s;return Xr(()=>{i=s,s=[],V(()=>{e!==r(...s)&&(t(e,...s),i&&ci(r(...i),e)&&t(null,...i))})}),()=>{lt(()=>{s&&ci(r(...s),e)&&t(null,...s)})}}),e}function aa(e){return function(...t){var r=t[0];return r.stopPropagation(),e==null?void 0:e.apply(this,t)}}function fs(e=!1){const t=L,r=t.l.u;if(!r)return;let n=()=>gt(t.s);if(e){let i=0,s={};const o=Jr(()=>{let f=!1;const a=t.s;for(const u in a)a[u]!==s[u]&&(s[u]=a[u],f=!0);return f&&i++,i});n=()=>c(o)}r.b.length&&Oo(()=>{vi(t,n),vn(r.b)}),Tn(()=>{const i=V(()=>r.m.map(xs));return()=>{for(const s of i)typeof s=="function"&&s()}}),r.a.length&&Tn(()=>{vi(t,n),vn(r.a)})}function vi(e,t){if(e.l.s)for(const r of e.l.s)c(r);t()}function la(e){var t=At(0);return function(){return arguments.length===1?(E(t,c(t)+1),arguments[0]):(c(t),e())}}function fa(e,t){var s;var r=(s=e.$$events)==null?void 0:s[t.type],n=On(r)?r.slice():r==null?[]:[r];for(var i of n)i.call(this,t)}let Fr=!1;function ua(e){var t=Fr;try{return Fr=!1,[e(),Fr]}finally{Fr=t}}function ne(e,t,r,n){var N;var i=!cr||(r&Zs)!==0,s=(r&to)!==0,o=n,f=!0,a=()=>(f&&(f=!1,o=n),o),u;{var h=qt in e||Is in e;u=((N=Xt(e,t))==null?void 0:N.set)??(h&&t in e?S=>e[t]=S:void 0)}var p,_=!1;[p,_]=ua(()=>e[t]),p===void 0&&n!==void 0&&(p=a(),u&&(i&&Gs(),u(p)));var w;if(i?w=()=>{var S=e[t];return S===void 0?a():(f=!0,S)}:w=()=>{var S=e[t];return S!==void 0&&(o=void 0),S===void 0?o:S},i&&(r&eo)===0)return w;if(u){var m=e.$$legacy;return(function(S,x){return arguments.length>0?((!i||!x||m||_)&&u(x?w():S),S):w()})}var b=!1,v=$r(()=>(b=!1,w()));c(v);var y=P;return(function(S,x){if(arguments.length>0){const z=x?c(v):i&&s?$t(S):S;return E(v,z),b=!0,o!==void 0&&(o=z),S}return jt&&b||(y.f&at)!==0?v.v:c(v)})}function Wn(e){L===null&&Si(),cr&&L.l!==null?ca(L).m.push(e):Tn(()=>{const t=V(e);if(typeof t=="function")return t})}function us(e){L===null&&Si(),Wn(()=>()=>V(e))}function ca(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const da="5";var gi;typeof window<"u"&&((gi=window.__svelte??(window.__svelte={})).v??(gi.v=new Set)).add(da);ao();class hi extends Error{constructor(r,n,i){super(i);ae(this,"url");ae(this,"status");ae(this,"statusText");ae(this,"body");ae(this,"request");this.name="ApiError",this.url=n.url,this.status=n.status,this.statusText=n.statusText,this.body=n.body,this.request=r}}class va extends Error{constructor(t){super(t),this.name="CancelError"}get isCancelled(){return!0}}var $e,Xe,Be,yt,Lt,sr,bt;class ha{constructor(t){C(this,$e);C(this,Xe);C(this,Be);C(this,yt);C(this,Lt);C(this,sr);C(this,bt);R(this,$e,!1),R(this,Xe,!1),R(this,Be,!1),R(this,yt,[]),R(this,Lt,new Promise((r,n)=>{R(this,sr,r),R(this,bt,n);const i=f=>{l(this,$e)||l(this,Xe)||l(this,Be)||(R(this,$e,!0),l(this,sr)&&l(this,sr).call(this,f))},s=f=>{l(this,$e)||l(this,Xe)||l(this,Be)||(R(this,Xe,!0),l(this,bt)&&l(this,bt).call(this,f))},o=f=>{l(this,$e)||l(this,Xe)||l(this,Be)||l(this,yt).push(f)};return Object.defineProperty(o,"isResolved",{get:()=>l(this,$e)}),Object.defineProperty(o,"isRejected",{get:()=>l(this,Xe)}),Object.defineProperty(o,"isCancelled",{get:()=>l(this,Be)}),t(i,s,o)}))}get[Symbol.toStringTag](){return"Cancellable Promise"}then(t,r){return l(this,Lt).then(t,r)}catch(t){return l(this,Lt).catch(t)}finally(t){return l(this,Lt).finally(t)}cancel(){if(!(l(this,$e)||l(this,Xe)||l(this,Be))){if(R(this,Be,!0),l(this,yt).length)try{for(const t of l(this,yt))t()}catch(t){console.warn("Cancellation threw an error",t);return}l(this,yt).length=0,l(this,bt)&&l(this,bt).call(this,new va("Request aborted"))}}get isCancelled(){return l(this,Be)}}$e=new WeakMap,Xe=new WeakMap,Be=new WeakMap,yt=new WeakMap,Lt=new WeakMap,sr=new WeakMap,bt=new WeakMap;const ie={BASE:"",VERSION:"1.0.0",WITH_CREDENTIALS:!1,CREDENTIALS:"include",TOKEN:void 0,USERNAME:void 0,PASSWORD:void 0,HEADERS:void 0,ENCODE_PATH:void 0},zn=e=>e!=null,Dr=e=>typeof e=="string",cn=e=>Dr(e)&&e!=="",Yn=e=>typeof e=="object"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.arrayBuffer=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),cs=e=>e instanceof FormData,pa=e=>{try{return btoa(e)}catch{return Buffer.from(e).toString("base64")}},_a=e=>{const t=[],r=(i,s)=>{t.push(`${encodeURIComponent(i)}=${encodeURIComponent(String(s))}`)},n=(i,s)=>{zn(s)&&(Array.isArray(s)?s.forEach(o=>{n(i,o)}):typeof s=="object"?Object.entries(s).forEach(([o,f])=>{n(`${i}[${o}]`,f)}):r(i,s))};return Object.entries(e).forEach(([i,s])=>{n(i,s)}),t.length>0?`?${t.join("&")}`:""},wa=(e,t)=>{const r=e.ENCODE_PATH||encodeURI,n=t.url.replace("{api-version}",e.VERSION).replace(/{(.*?)}/g,(s,o)=>{var f;return(f=t.path)!=null&&f.hasOwnProperty(o)?r(String(t.path[o])):s}),i=`${e.BASE}${n}`;return t.query?`${i}${_a(t.query)}`:i},ga=e=>{if(e.formData){const t=new FormData,r=(n,i)=>{Dr(i)||Yn(i)?t.append(n,i):t.append(n,JSON.stringify(i))};return Object.entries(e.formData).filter(([n,i])=>zn(i)).forEach(([n,i])=>{Array.isArray(i)?i.forEach(s=>r(n,s)):r(n,i)}),t}},Br=async(e,t)=>typeof t=="function"?t(e):t,ma=async(e,t)=>{const[r,n,i,s]=await Promise.all([Br(t,e.TOKEN),Br(t,e.USERNAME),Br(t,e.PASSWORD),Br(t,e.HEADERS)]),o=Object.entries({Accept:"application/json",...s,...t.headers}).filter(([f,a])=>zn(a)).reduce((f,[a,u])=>({...f,[a]:String(u)}),{});if(cn(r)&&(o.Authorization=`Bearer ${r}`),cn(n)&&cn(i)){const f=pa(`${n}:${i}`);o.Authorization=`Basic ${f}`}return t.body!==void 0&&(t.mediaType?o["Content-Type"]=t.mediaType:Yn(t.body)?o["Content-Type"]=t.body.type||"application/octet-stream":Dr(t.body)?o["Content-Type"]="text/plain":cs(t.body)||(o["Content-Type"]="application/json")),new Headers(o)},ya=e=>{var t;if(e.body!==void 0)return(t=e.mediaType)!=null&&t.includes("/json")?JSON.stringify(e.body):Dr(e.body)||Yn(e.body)||cs(e.body)?e.body:JSON.stringify(e.body)},ba=async(e,t,r,n,i,s,o)=>{const f=new AbortController,a={headers:s,body:n??i,method:t.method,signal:f.signal};return e.WITH_CREDENTIALS&&(a.credentials=e.CREDENTIALS),o(()=>f.abort()),await fetch(r,a)},Ea=(e,t)=>{if(t){const r=e.headers.get(t);if(Dr(r))return r}},Ra=async e=>{if(e.status!==204)try{const t=e.headers.get("Content-Type");if(t)return["application/json","application/problem+json"].some(i=>t.toLowerCase().startsWith(i))?await e.json():await e.text()}catch(t){console.error(t)}},Sa=(e,t)=>{const n={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable",...e.errors}[t.status];if(n)throw new hi(e,t,n);if(!t.ok){const i=t.status??"unknown",s=t.statusText??"unknown",o=(()=>{try{return JSON.stringify(t.body,null,2)}catch{return}})();throw new hi(e,t,`Generic Error: status: ${i}; status text: ${s}; body: ${o}`)}},le=(e,t)=>new ha(async(r,n,i)=>{try{const s=wa(e,t),o=ga(t),f=ya(t),a=await ma(e,t);if(!i.isCancelled){const u=await ba(e,t,s,f,o,a,i),h=await Ra(u),p=Ea(u,t.responseHeader),_={url:s,ok:u.ok,status:u.status,statusText:u.statusText,body:p??h};Sa(t,_),r(_.body)}}catch(s){n(s)}});class Jt{static rebuildProjection(){return le(ie,{method:"POST",url:"/admin/rebuild",errors:{500:"Internal Server Error"}})}static getClientConfig(){return le(ie,{method:"GET",url:"/client-config"})}static getHealth(){return le(ie,{method:"GET",url:"/health"})}static listProjects(){return le(ie,{method:"GET",url:"/projects",errors:{500:"Internal Server Error"}})}static createProject(t){return le(ie,{method:"POST",url:"/projects",body:t,mediaType:"application/json",errors:{400:"Bad Request",409:"Conflict",422:"Unprocessable Entity",500:"Internal Server Error"}})}static deleteProject(t){return le(ie,{method:"DELETE",url:"/projects/{project}",path:{project:t},errors:{404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static listCards(t,r){return le(ie,{method:"GET",url:"/projects/{project}/cards",path:{project:t},query:{include_deleted:r},errors:{422:"Unprocessable Entity",500:"Internal Server Error"}})}static createCard(t,r){return le(ie,{method:"POST",url:"/projects/{project}/cards",path:{project:t},body:r,mediaType:"application/json",errors:{400:"Bad Request",422:"Unprocessable Entity",500:"Internal Server Error"}})}static getCard(t,r){return le(ie,{method:"GET",url:"/projects/{project}/cards/{number}",path:{project:t,number:r},errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static deleteCard(t,r,n){return le(ie,{method:"DELETE",url:"/projects/{project}/cards/{number}",path:{project:t,number:r},query:{hard:n},errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static setCardBranch(t,r,n){return le(ie,{method:"PATCH",url:"/projects/{project}/cards/{number}/branch",path:{project:t,number:r},body:n,mediaType:"application/json",errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static commentCard(t,r,n){return le(ie,{method:"POST",url:"/projects/{project}/cards/{number}/comments",path:{project:t,number:r},body:n,mediaType:"application/json",errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static appendDescription(t,r,n){return le(ie,{method:"PATCH",url:"/projects/{project}/cards/{number}/description",path:{project:t,number:r},body:n,mediaType:"application/json",errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static moveCard(t,r,n){return le(ie,{method:"PATCH",url:"/projects/{project}/cards/{number}/move",path:{project:t,number:r},body:n,mediaType:"application/json",errors:{400:"Bad Request",404:"Not Found",422:"Unprocessable Entity",500:"Internal Server Error"}})}static websocketEvents(){return le(ie,{method:"GET",url:"/ws"})}}var Ta=G('<p class="state svelte-g56mwf" data-testid="card-details-loading">Loading card details...</p>'),Ca=G('<div class="state svelte-g56mwf"><p data-testid="card-details-error"> </p> <button data-testid="card-details-retry" type="button" class="svelte-g56mwf">Retry</button></div>'),Aa=G('<p class="empty svelte-g56mwf">No description</p>'),ja=G('<article class="event svelte-g56mwf"><p class="svelte-g56mwf"> </p></article>'),Da=G('<p class="empty svelte-g56mwf">No comments</p>'),Pa=G('<article class="event svelte-g56mwf"><p class="svelte-g56mwf"> </p></article>'),Na=G('<section class="review-actions svelte-g56mwf" data-testid="card-review-actions"><h3 class="svelte-g56mwf">Review Actions</h3> <div class="review-actions-buttons svelte-g56mwf"><button data-testid="card-review-move-todo" type="button" class="svelte-g56mwf">Move to Todo</button> <button data-testid="card-review-move-doing" type="button" class="svelte-g56mwf">Move to Doing</button> <button data-testid="card-review-move-done" type="button" class="svelte-g56mwf">Move to Done</button></div></section>'),Ma=G('<p class="reason-error svelte-g56mwf" data-testid="review-reason-error"> </p>'),Oa=G('<section class="reason-modal svelte-g56mwf" data-testid="review-reason-modal"><h3 class="svelte-g56mwf"> </h3> <textarea data-testid="review-reason-input" placeholder="Why is this card moving back?" rows="4" class="svelte-g56mwf"></textarea> <!> <div class="reason-modal-buttons svelte-g56mwf"><button data-testid="review-reason-submit" type="button" class="svelte-g56mwf">Confirm</button> <button data-testid="review-reason-cancel" type="button" class="svelte-g56mwf">Cancel</button></div></section>'),xa=G('<div class="details-grid svelte-g56mwf"><section><h3 class="svelte-g56mwf">Branch</h3> <p class="mono svelte-g56mwf" data-testid="card-details-branch"> </p></section> <section><h3 class="svelte-g56mwf">Description</h3> <div data-testid="card-details-description"><!></div></section> <section><h3 class="svelte-g56mwf">Comments</h3> <div data-testid="card-details-comments"><!></div></section> <!> <!></div>'),Ia=G('<div class="layer svelte-g56mwf"><section class="modal svelte-g56mwf" data-testid="card-details-modal"><header class="header svelte-g56mwf"><h2 data-testid="card-details-title" class="svelte-g56mwf"> </h2> <button data-testid="card-details-close" type="button" class="svelte-g56mwf">Close</button></header> <!></section></div>');function ka(e,t){kn(t,!1);let r=ne(t,"card",8,null),n=ne(t,"loading",8,!1),i=ne(t,"errorMessage",8,null),s=ne(t,"onClose",8,()=>{}),o=ne(t,"onRetry",8,()=>{}),f=ne(t,"reviewActionsVisible",8,!1),a=ne(t,"reviewActionBusy",8,!1),u=ne(t,"onMoveReviewToTodo",8,()=>{}),h=ne(t,"onMoveReviewToDoing",8,()=>{}),p=ne(t,"onMoveReviewToDone",8,()=>{}),_=ne(t,"reviewReasonTargetStatus",8,null),w=ne(t,"reviewReasonInput",8,""),m=ne(t,"reviewReasonError",8,null),b=ne(t,"onReviewReasonInput",8,()=>{}),v=ne(t,"onSubmitReviewReason",8,()=>{}),y=ne(t,"onCancelReviewReason",8,()=>{}),N=W(null),S=W(null),x=W(null);Wn(()=>{const M=U=>{var we;U.target instanceof Node&&((we=c(N))!=null&&we.contains(U.target)||s()())};return window.addEventListener("pointerdown",M),()=>{window.removeEventListener("pointerdown",M)}}),us(()=>{E(N,null),E(S,null)});function z(M){return M.replace(/\\n/g,`
`)}Cn(()=>(gt(_()),c(x),c(S)),()=>{_()!==c(x)&&(E(x,_()),_()&&Uo().then(()=>{var M;return(M=c(S))==null?void 0:M.focus()}))}),Ji(),fs();var fe=Ia(),F=A(fe),B=A(F),_e=A(B),et=A(_e),Ge=k(_e,2),Wt=k(B,2);{var tt=M=>{var U=Ta();q(M,U)},ut=M=>{var U=Ca(),we=A(U),se=A(we),rt=k(we,2);ve(()=>Ee(se,i())),De("click",rt,function(...ct){var Yt;(Yt=o())==null||Yt.apply(this,ct)}),q(M,U)},zt=M=>{var U=xa(),we=A(U),se=k(A(we),2),rt=A(se),ct=k(we,2),Yt=k(A(ct),2),dt=A(Yt);{var Pr=O=>{var X=Aa();q(O,X)},Nr=O=>{var X=ai(),We=Sn(X);mr(We,1,()=>(gt(r()),V(()=>r().description??[])),Pn,(Te,J)=>{var ue=ja(),oe=A(ue),Q=A(oe);ve(ze=>Ee(Q,ze),[()=>(c(J),V(()=>z(c(J).body)))]),q(Te,ue)}),q(O,X)};Me(dt,O=>{gt(r()),V(()=>!r().description||r().description.length===0)?O(Pr):O(Nr,!1)})}var Mr=k(ct,2),Qr=k(A(Mr),2),Zr=A(Qr);{var en=O=>{var X=Da();q(O,X)},Or=O=>{var X=ai(),We=Sn(X);mr(We,1,()=>(gt(r()),V(()=>r().comments??[])),Pn,(Te,J)=>{var ue=Pa(),oe=A(ue),Q=A(oe);ve(ze=>Ee(Q,ze),[()=>(c(J),V(()=>z(c(J).body)))]),q(Te,ue)}),q(O,X)};Me(Zr,O=>{gt(r()),V(()=>!r().comments||r().comments.length===0)?O(en):O(Or,!1)})}var xr=k(Mr,2);{var tn=O=>{var X=Na(),We=k(A(X),2),Te=A(We),J=k(Te,2),ue=k(J,2);ve(()=>{Te.disabled=a(),J.disabled=a(),ue.disabled=a()}),De("click",Te,function(...oe){var Q;(Q=u())==null||Q.apply(this,oe)}),De("click",J,function(...oe){var Q;(Q=h())==null||Q.apply(this,oe)}),De("click",ue,function(...oe){var Q;(Q=p())==null||Q.apply(this,oe)}),q(O,X)};Me(xr,O=>{f()&&O(tn)})}var rn=k(xr,2);{var Ir=O=>{var X=Oa(),We=A(X),Te=A(We),J=k(We,2);di(J,ge=>E(S,ge),()=>c(S));var ue=k(J,2);{var oe=ge=>{var Ce=Ma(),nn=A(Ce);ve(()=>Ee(nn,m())),q(ge,Ce)};Me(ue,ge=>{m()&&ge(oe)})}var Q=k(ue,2),ze=A(Q),vr=k(ze,2);ve(()=>{Ee(Te,`Reason for Moving to ${_()??""}`),sa(J,w()),ze.disabled=a(),vr.disabled=a()}),De("input",J,ge=>b()(ge.currentTarget.value)),De("click",ze,function(...ge){var Ce;(Ce=v())==null||Ce.apply(this,ge)}),De("click",vr,function(...ge){var Ce;(Ce=y())==null||Ce.apply(this,ge)}),q(O,X)};Me(rn,O=>{_()&&O(Ir)})}ve(O=>Ee(rt,O),[()=>(gt(r()),V(()=>{var O;return((O=r().branch)==null?void 0:O.trim())||"No branch"}))]),q(M,U)};Me(Wt,M=>{n()?M(tt):i()?M(ut,1):r()&&M(zt,2)})}di(F,M=>E(N,M),()=>c(N)),ve(()=>Ee(et,(gt(r()),V(()=>{var M;return((M=r())==null?void 0:M.title)??"Card details"})))),De("click",Ge,function(...M){var U;(U=s())==null||U.apply(this,M)}),De("click",F,aa(function(M){fa.call(this,t,M)})),q(e,fe),Ln()}var pi=la(()=>ie),La=G('<h1 data-testid="projects-title" class="svelte-1n46o8q">Projects</h1>'),qa=G('<li><button data-testid="project-item" type="button"> </button></li>'),Fa=G('<ul class="project-list svelte-1n46o8q"></ul>'),Ba=G("<p>No project selected</p>"),Ua=G('<div class="card-branch svelte-1n46o8q"> </div>'),Ha=G('<article class="card svelte-1n46o8q" data-testid="card-item"><div class="card-title svelte-1n46o8q"> </div> <!></article>'),Va=G('<section class="lane svelte-1n46o8q"><h2 class="svelte-1n46o8q"> </h2> <div class="lane-cards svelte-1n46o8q"></div></section>'),Ga=G('<div class="board svelte-1n46o8q" data-testid="board"></div>'),Wa=G('<div class="alert svelte-1n46o8q" role="alert"> </div>'),za=G('<main><aside data-testid="projects-sidebar"><div class="sidebar-header svelte-1n46o8q"><!> <button class="sidebar-toggle svelte-1n46o8q" data-testid="sidebar-toggle" type="button"> </button></div> <!></aside> <section class="detail svelte-1n46o8q"><!></section></main> <!> <!>',1);function Ya(e,t){kn(t,!1);const r=["Todo","Doing","Review","Done"],n=new Set(["card.created","card.moved","card.deleted_soft","card.deleted_hard"]),i=new Set(["project.created","project.deleted"]),s=/^\/card\/([^/]+)\/(\d+)\/?$/,o="".trim();let f=o,a=W([]),u=W([]),h=W(Or()),p=W(null),_=W(null),w=W(!1),m=null,b=W(null),v=W(null),y=W(null),N=W(!1),S=W(null),x=0,z=W(!1),fe=W(!1),F=W(null),B=W(""),_e=W(null);Wn(async()=>{f=await We(),pi(pi().BASE=f),await et();const d=Ir(window.location.pathname);d&&await tt(d.projectSlug,d.number,{historyMode:"replace",selectProject:!0}),window.addEventListener("popstate",Pr),window.addEventListener("keydown",Nr),Mr()}),us(()=>{m==null||m.close(),window.removeEventListener("popstate",Pr),window.removeEventListener("keydown",Nr)});async function et(){try{const d=await Jt.listProjects();E(a,[...d.projects].sort(Zr)),c(p)&&!c(a).some(g=>g.slug===c(p))&&E(p,null),c(b)&&!c(a).some(g=>g.slug===c(b))&&dt({historyMode:"replace"}),await Ge()}catch(d){E(_,`Failed to load projects: ${String(d)}`)}}async function Ge(){if(!c(p)){E(u,[]);return}try{const d=await Jt.listCards(c(p));E(u,[...d.cards].sort(en))}catch(d){E(_,`Failed to load cards: ${String(d)}`)}}async function Wt(d){E(p,d),c(b)&&c(b)!==d&&dt({historyMode:"replace"}),await Ge()}async function tt(d,g,T={}){const I=T.historyMode??"push",vt=T.selectProject??!1,Ae=++x;if(E(b,d),E(v,g),E(y,null),E(S,null),E(N,!0),O(d,g,I),!(vt&&c(p)!==d&&(E(p,d),await Ge(),Ae!==x)))try{const ht=await Jt.getCard(d,g);if(Ae!==x)return;E(y,ht)}catch(ht){if(Ae!==x)return;E(S,`Failed to load card details: ${String(ht)}`)}finally{Ae===x&&E(N,!1)}}async function ut(){!c(b)||c(v)===null||await tt(c(b),c(v),{historyMode:"replace",selectProject:!0})}function zt(d){return d==="Todo"||d==="Doing"}function M(d){E(F,d),E(B,""),E(_e,null)}function U(){E(F,null),E(B,""),E(_e,null)}function we(d){E(B,d),c(_e)&&E(_e,null)}async function se(){await Ge(),await ut()}async function rt(d,g){if(!(!c(b)||c(v)===null)){E(fe,!0);try{if(await Jt.moveCard(c(b),c(v),{status:d}),g!==null){const T=`Moved back to ${d}: ${g}`;try{await Jt.commentCard(c(b),c(v),{body:T})}catch{try{await Jt.moveCard(c(b),c(v),{status:"Review"})}catch{}E(_,"Failed to add transition reason"),U();return}}U(),dt({historyMode:"replace"})}catch(T){E(_,`Failed to move card: ${String(T)}`)}finally{await se(),E(fe,!1)}}}async function ct(d){var g;if(((g=c(y))==null?void 0:g.status)==="Review"){if(zt(d)){M(d);return}await rt(d,null)}}async function Yt(){if(!c(F))return;const d=c(B).trim();if(!d){E(_e,"Reason is required");return}await rt(c(F),d)}function dt(d={}){const g=d.historyMode??"push";x+=1,U(),E(b,null),E(v,null),E(y,null),E(S,null),E(N,!1),X(g)}function Pr(){const d=Ir(window.location.pathname);if(!d){dt({historyMode:"none"});return}tt(d.projectSlug,d.number,{historyMode:"none",selectProject:!0})}function Nr(d){if(d.key==="Escape"&&c(F)){d.preventDefault(),U();return}d.key==="Escape"&&c(z)&&(d.preventDefault(),dt({historyMode:"push"}))}function Mr(){const d=Qr();m=new WebSocket(d),m.addEventListener("message",async g=>{try{const T=JSON.parse(String(g.data));if(T.type&&i.has(T.type)){await et();return}T.type&&n.has(T.type)&&c(p)&&T.project===c(p)&&(await Ge(),c(b)===c(p)&&c(v)!==null&&await ut())}catch{}}),m.addEventListener("error",()=>{E(_,"Project stream failed: websocket error")})}function Qr(){const d=f||window.location.origin,g=new URL(d);return g.protocol=g.protocol==="https:"?"wss:":"ws:",g.pathname="/ws",g.search="",g.hash="",g.toString()}function Zr(d,g){const T=d.name.localeCompare(g.name);return T!==0?T:d.slug.localeCompare(g.slug)}function en(d,g){return d.number-g.number}function Or(){return{Todo:[],Doing:[],Review:[],Done:[]}}function xr(d){const g=Or();for(const T of d)(T.status==="Todo"||T.status==="Doing"||T.status==="Review"||T.status==="Done")&&g[T.status].push(T);return g}function tn(d){var T,I;const g=[];return(T=d.local_path)!=null&&T.trim()&&g.push(`Local: ${d.local_path.trim()}`),(I=d.remote_url)!=null&&I.trim()&&g.push(`Remote: ${d.remote_url.trim()}`),g.length>0?g.join(`
`):d.slug}function rn(){E(w,!c(w))}function Ir(d){const g=d.match(s);if(!g)return null;let T;try{T=decodeURIComponent(g[1])}catch{return null}const I=Number.parseInt(g[2],10);return!Number.isInteger(I)||I<=0?null:{projectSlug:T,number:I}}function O(d,g,T){if(T==="none")return;const I=`/card/${encodeURIComponent(d)}/${g}`;if(window.location.pathname!==I){if(T==="replace"){window.history.replaceState({},"",I);return}window.history.pushState({},"",I)}}function X(d){if(d!=="none"&&window.location.pathname!=="/"){if(d==="replace"){window.history.replaceState({},"","/");return}window.history.pushState({},"","/")}}async function We(){if(o)return o;try{const d=await fetch("/client-config");if(d.ok){const g=await d.json();if(typeof g.server_url=="string"&&g.server_url.trim()!=="")return g.server_url.trim()}}catch{}return window.location.origin}Cn(()=>c(u),()=>{E(h,xr(c(u)))}),Cn(()=>(c(b),c(v)),()=>{E(z,c(b)!==null&&c(v)!==null)}),Ji(),fs();var Te=za(),J=Sn(Te);let ue;var oe=A(J);let Q;var ze=A(oe),vr=A(ze);{var ge=d=>{var g=La();q(d,g)};Me(vr,d=>{c(w)||d(ge)})}var Ce=k(vr,2),nn=A(Ce),ds=k(ze,2);{var vs=d=>{var g=Fa();mr(g,5,()=>c(a),T=>T.slug,(T,I)=>{var vt=qa(),Ae=A(vt);let ht;var sn=A(Ae);ve(hr=>{un(Ae,"title",hr),ht=fn(Ae,1,"svelte-1n46o8q",null,ht,{selected:c(p)===c(I).slug}),Ee(sn,(c(I),V(()=>c(I).name)))},[()=>(c(I),V(()=>tn(c(I))))]),De("click",Ae,()=>Wt(c(I).slug)),q(T,vt)}),q(d,g)};Me(ds,d=>{c(w)||d(vs)})}var hs=k(oe,2),ps=A(hs);{var _s=d=>{var g=Ba();q(d,g)},ws=d=>{var g=Ga();mr(g,5,()=>r,Pn,(T,I)=>{var vt=Va(),Ae=A(vt),ht=A(Ae),sn=k(Ae,2);mr(sn,5,()=>(c(h),c(I),V(()=>c(h)[c(I)])),hr=>hr.id,(hr,pt)=>{var on=Ha(),$n=A(on),bs=A($n),Es=k($n,2);{var Rs=Kt=>{var Xn=Ua(),Ts=A(Xn);ve(Cs=>Ee(Ts,Cs),[()=>(c(pt),V(()=>c(pt).branch.trim()))]),q(Kt,Xn)},Ss=So(()=>(c(pt),V(()=>{var Kt;return(Kt=c(pt).branch)==null?void 0:Kt.trim()})));Me(Es,Kt=>{c(Ss)&&Kt(Rs)})}ve(()=>Ee(bs,(c(pt),V(()=>c(pt).title)))),De("click",on,()=>tt(c(pt).project,c(pt).number,{historyMode:"push",selectProject:!1})),q(hr,on)}),ve(()=>{un(vt,"data-testid","lane-"+c(I)),Ee(ht,c(I))}),q(T,vt)}),q(d,g)};Me(ps,d=>{c(p)?d(ws,!1):d(_s)})}var Jn=k(J,2);{var gs=d=>{{let g=$r(()=>(c(y),V(()=>{var T;return((T=c(y))==null?void 0:T.status)==="Review"})));ka(d,{get card(){return c(y)},get errorMessage(){return c(S)},get loading(){return c(N)},onCancelReviewReason:U,onClose:()=>dt({historyMode:"push"}),onMoveReviewToDoing:()=>ct("Doing"),onMoveReviewToDone:()=>ct("Done"),onMoveReviewToTodo:()=>ct("Todo"),onReviewReasonInput:we,onRetry:ut,onSubmitReviewReason:Yt,get reviewActionBusy(){return c(fe)},get reviewActionsVisible(){return c(g)},get reviewReasonError(){return c(_e)},get reviewReasonInput(){return c(B)},get reviewReasonTargetStatus(){return c(F)}})}};Me(Jn,d=>{c(z)&&d(gs)})}var ms=k(Jn,2);{var ys=d=>{var g=Wa(),T=A(g);ve(()=>Ee(T,c(_))),q(d,g)};Me(ms,d=>{c(_)&&d(ys)})}ve(()=>{ue=fn(J,1,"layout svelte-1n46o8q",null,ue,{"sidebar-hidden":c(w)}),Q=fn(oe,1,"sidebar svelte-1n46o8q",null,Q,{collapsed:c(w)}),un(Ce,"aria-label",c(w)?"Show projects":"Hide projects"),Ee(nn,c(w)?"âº":"â¹")}),De("click",Ce,rn),q(e,Te),Ln()}Ko(Ya,{target:document.getElementById("app")});
